<!doctype html>
<html><head><meta charset="utf-8"/><title>Register</title><link rel="stylesheet" href="/styles.css"></head>
<body>
<main>
<h2>Register</h2>
<form id="regForm">
  <label>Name</label><input id="name" required>
  <label>Email</label><input type="email" id="email" required>
  <label>Password</label><input type="password" id="password" required>
  <label>Role</label>
  <select id="role"><option value="patient">Patient</option><option value="doctor">Doctor</option></select>
  <button type="submit">Register</button>
</form>
<div id="msg"></div>
<script>
document.getElementById('regForm').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const payload = {
    name: document.getElementById('name').value,
    email: document.getElementById('email').value,
    password: document.getElementById('password').value,
    role: document.getElementById('role').value
  };
  const res = await fetch('/api/auth.php?action=register', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body: JSON.stringify(payload)
  });
  const data = await res.json();
  if (data.success) {
    alert('Registered. Please login.');
    window.location.href = '/login.html';
  } else {
    document.getElementById('msg').innerText = data.error || 'Registration failed';
  }
});
</script>
</main></body></html>
